<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Audio Cards</title>
    <style>
        .card {
            border: 1px solid #ddd;
            padding: 10px;
            margin: 10px;
            text-align: center;
            width: 200px;
            display: inline-block;
        }
        .progress {
            width: 100%;
            height: 5px;
            background: #ddd;
            margin-top: 10px;
            position: relative;
        }
        .progress-bar {
            height: 100%;
            width: 0;
            background: #4CAF50;
            position: absolute;
        }
        .buttons {
            margin-top: 20px;
            text-align: center;
        }
        .buttons a {
            text-decoration: none;
            margin: 0 10px;
        }
        .buttons button {
            padding: 10px 20px;
            font-size: 16px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <input type="text" id="search" placeholder="Search songs..." onkeyup="filterSongs()">
    <div id="cards-container"></div>

    <div class="buttons">
        <a href="index.html"><button>Main Menu</button></a>
        <a href="catalog.html"><button>Catalog</button></a>
        <a href="battle.html"><button>Battle</button></a>
        <a href="map.html"><button>Map</button></a>
    </div>

    <script>
        const audioFiles = [
            { name: "Humble Ashore", file: "ost/HumbleAshore.mp3", image: ".png", ost: 1000 },
            { name: "Skeptic Electric", file: "ost/SkepticElectric.mp3", image: ".png", ost: 1000 },
            { name: "Hectic Electric", file: "ost/HecticElectric.mp3", image: ".png", ost: 1000 },
            { name: "Power Outage / Circuit Breaker", file: "ost/PowerOutage.mp3", image: ".png", ost: 1000 },
            { name: "Skibidi Electric", file: "ost/SkibidiElectric.mp3", image: ".png", ost: 1000 },
            { name: "Distant Rumbles", file: "ost/DistantRumbles.mp3", image: ".png", ost: 1000 },
            { name: "Tumbling Rumbles", file: "ost/TumblingRumbles.mp3", image: ".png", ost: 1000 }
        ];

        const container = document.getElementById("cards-container");

        function displaySongs(filteredFiles) {
            container.innerHTML = "";
            filteredFiles.forEach(({ name, file, image }) => {
                const card = document.createElement("div");
                card.className = "card";
                card.setAttribute("data-name", name.toLowerCase());

                card.innerHTML = `
                    <img src="${image}" alt="${name}" width="100%">
                    <h3>${name}</h3>
                    <button onclick="playAudio(this, '${file}')">Play</button>
                    <div class="progress"><div class="progress-bar"></div></div>
                    <audio src="${file}" loop ontimeupdate="updateProgress(this)"></audio>
                `;
                container.appendChild(card);
    });
}
        function displaySongs(filteredFiles) {
            container.innerHTML = "";
            filteredFiles.forEach(({ name, file, image }) => {
                const card = document.createElement("div");
                card.className = "card";
                card.setAttribute("data-name", name.toLowerCase());

                card.innerHTML = `
                    <img src="${image}" alt="${name}" width="100%">
                    <h3>${name}</h3>
                    <button onclick="playAudio(this)">Play</button>
                    <div class="progress" onclick="seekAudio(event, this)">
                        <div class="progress-bar"></div>
                    </div>
                    <audio src="${file}" loop ontimeupdate="updateProgress(this)"></audio>
                `;

                container.appendChild(card);
            });
        }

        function playAudio(button) {
            const card = button.parentElement;
            const audio = card.querySelector("audio");

            if (audio.paused) {
                audio.play();
                button.textContent = "Pause";
            } else {
                audio.pause();
                button.textContent = "Play";
            }

            audio.onended = () => { button.textContent = "Play"; };
        }

        function updateProgress(audio) {
            const progressBar = audio.parentElement.querySelector(".progress-bar");
            progressBar.style.width = (audio.currentTime / audio.duration) * 100 + "%";
        }

        function seekAudio(event, progressElement) {
            const audio = progressElement.parentElement.querySelector("audio");
            const rect = progressElement.getBoundingClientRect();
            const clickX = event.clientX - rect.left;
            const newTime = (clickX / rect.width) * audio.duration;
            
            audio.currentTime = newTime;
        }


        displaySongs(audioFiles);
        
    </script>
</body>
</html>
